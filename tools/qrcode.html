<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>二维码生成器</title>
    <style>
        body {
            margin: 0;
            font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Microsoft Yahei", sans-serif;
            background: #0b0f19;
            color: #e6e8ee;
        }

        .wrap {
            padding: 16px;
            display: grid;
            gap: 12px;
        }

        input {
            width: 100%;
            height: 40px;
            border-radius: 10px;
            border: 1px solid #1b2336;
            background: #0f1422;
            color: #e6e8ee;
            padding: 0 10px;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 140px 120px;
            gap: 8px;
        }

        button {
            height: 40px;
            border-radius: 10px;
            border: 1px solid #1b2336;
            background: #3b82f6;
            color: #fff;
            cursor: pointer;
        }

        #qr {
            display: grid;
            place-items: center;
            padding: 12px;
            border: 1px solid #1b2336;
            border-radius: 10px;
            background: #0f1422;
            min-height: 240px;
        }

        .hint {
            color: #a7adbd;
            font-size: 12px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

</head>

<body>
    <div class="wrap">
        <div class="row">
            <input id="text" placeholder="输入文本或链接">
            <input id="size" type="number" value="256" min="128" max="1024" step="32" />
            <button id="gen">生成二维码</button>
        </div>
        <div id="qr">
            <div class="placeholder" id="placeholder">
                二维码将显示在这里
            </div>
            <canvas id="qrcode"></canvas>
        </div>
    </div>
    <script>
        const el = (id) => document.getElementById(id);
        
        const contentInput = el('text');
        const qrCodeCanvas = el('qrcode');
        const placeholder = el('placeholder');
        async function generateQRCode() {
            const content = contentInput.value.trim();
            
            // 验证输入
            if (!content) {
                alert('请输入内容');
                return;
            }
            
            // 清空之前的二维码
            qrCodeCanvas.innerHTML = '';
            
            // 隐藏占位符，显示二维码
            placeholder.style.display = 'none';
            qrCodeCanvas.style.display = 'block';
            
            // 生成二维码
            QRCode.toCanvas(qrCodeCanvas, content, {
                width: 200,
                margin: 1,
                color: {
                    dark: '#000000',
                    light: '#ffffff'
                }
            }, (error) => {
                if (error) {
                    console.error('生成二维码出错:', error);
                    alert('生成二维码失败，请重试');
                    placeholder.style.display = 'block';
                    qrCodeCanvas.style.display = 'none';
                }
            });
        }

        el('gen').onclick = generateQRCode;
        contentInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') generateQRCode(); });

       
    </script>
</body>

</html>