<!DOCTYPE html>
<html>
  <head>
    <style>
                  
    </style>
    <script>
      // 动态加载 QR 库，优先本地文件，再退化到外部 CDN
      (function loadQrLib() {
          const cdns = [
              './vendor/qrcode.min.js',
              'https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js',
              'https://unpkg.com/qrcode/build/qrcode.min.js',
              'https://fastly.jsdelivr.net/npm/qrcode/build/qrcode.min.js'
          ];
          let loaded = false;
          function tryNext() {
              const url = cdns.shift();
              if (!url) return; // 放弃
              const s = document.createElement('script');
              s.src = url; s.async = true;
              s.onload = function () { loaded = true; document.dispatchEvent(new CustomEvent('qr-lib-ready')); };
              s.onerror = tryNext;
              document.head.appendChild(s);
          }
          tryNext();
          // 超时兜底
          setTimeout(() => { if (!loaded) document.dispatchEvent(new CustomEvent('qr-lib-failed')); }, 6000);
      })();
  </script>
  </head>

  <body>
    <div class="main-layout">
      
      <div id="qr"><span class="hint" id="status">正在加载二维码库…</span></div>
    </div>

    <script>
      const qr = document.getElementById('qr');
      qr.onclick = () => {
         // 在canvas上生成QR码
        QRCode.toCanvas(document.getElementById('qrcode'), 'https://example.com', {
          width: 200,       // 宽度
          margin: 2,        // 边距
          color: {
            dark: '#000000', // 前景色
            light: '#ffffff' // 背景色
          }
        }, (error) => {
          if (error) console.error(error);
          console.log('QR码生成成功');
        });
      }
     
    </script>
  </body>
</html>
